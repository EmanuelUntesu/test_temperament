{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <title>{% trans "ÃŽnregistrare - Test Temperament" %}</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #f4f7f6; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 20px;
        }
        .card { 
            background: white; 
            padding: 40px; 
            border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); 
            width: 100%;
            max-width: 450px;
            position: relative;
        }

        /* Stil pentru butoanele de limbÄƒ (Identic cu Login) */
        .lang-switcher {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
        }
        .lang-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        .lang-btn:hover, .lang-btn.active {
            opacity: 1;
        }
        .lang-btn img {
            width: 24px;
            height: auto;
            border-radius: 2px;
        }

        h2 { 
            text-align: center; 
            color: #2c3e50; 
            margin-bottom: 25px; 
        }
        form p { margin-bottom: 15px; color: #666; font-size: 0.9em; }
        label { display: block; margin-bottom: 5px; font-weight: 600; color: #444; }
        
        input { 
            width: 100%; padding: 12px; box-sizing: border-box; 
            border: 1px solid #ddd; border-radius: 6px; 
            font-size: 16px; margin-bottom: 5px;
        }
        input:focus { outline: none; border-color: #27ae60; box-shadow: 0 0 5px rgba(39, 174, 96, 0.2); }
        
        .helptext { display: block; font-size: 0.8em; color: #888; margin-bottom: 15px; line-height: 1.4; }
        ul.errorlist { color: #e74c3c; padding-left: 0; list-style: none; font-size: 0.85em; margin-bottom: 10px; }
        
        button.submit-btn { 
            width: 100%; padding: 12px; background: #27ae60; color: white; 
            border: none; border-radius: 6px; cursor: pointer; 
            font-size: 18px; font-weight: bold; margin-top: 15px; 
            transition: background 0.3s;
        }
        button.submit-btn:hover { background: #219150; }
        
        .footer-links { text-align: center; margin-top: 25px; font-size: 14px; color: #666; }
        .footer-links a { color: #27ae60; text-decoration: none; font-weight: bold; }
        .footer-links a:hover { text-decoration: underline; }
        .password-wrapper {
    position: relative;
    display: block;
    }

    .toggle-password {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        background: none;
        border: none;
        font-size: 14px;
        color: #666;
        padding: 5px;
        z-index: 10;
    }
    </style>
</head>
<body>
    <div class="card">
        <div class="lang-switcher">
            <form action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}">
                <button type="submit" name="language" value="ro" class="lang-btn {% if LANGUAGE_CODE == 'ro' %}active{% endif %}">
                    <img src="https://flagcdn.com/w40/ro.png" alt="RomÃ¢nÄƒ" title="RomÃ¢nÄƒ">
                </button>
                <button type="submit" name="language" value="fr" class="lang-btn {% if LANGUAGE_CODE == 'fr' %}active{% endif %}">
                    <img src="https://flagcdn.com/w40/fr.png" alt="FranÃ§ais" title="FranÃ§ais">
                </button>
            </form>
        </div>

        <h2>{% trans "CreeazÄƒ un cont nou" %}</h2>
        
        <form method="post">
            {% csrf_token %}
            {% for field in form %}
                <p>
                    <label for="{{ field.id_for_label }}">{{ field.label }}:</label>
                    {{ field }}
                    {% if field.help_text %}
                        <span class="helptext">{{ field.help_text|safe }}</span>
                    {% endif %}
                    {% for error in field.errors %}
                        <ul class="errorlist">
                            <li>{{ error }}</li>
                        </ul>
                    {% endfor %}
                </p>
            {% endfor %}
            <button type="submit" class="submit-btn">{% trans "ÃŽnregistreazÄƒ-te" %}</button>
        </form>

        <div class="footer-links">
            {% trans "Ai deja un cont?" %} <a href="{% url 'login' %}">{% trans "AutentificÄƒ-te aici" %}</a>
        </div>
    </div>
    <script>
        document.querySelectorAll('input[type="password"]').forEach(function(passwordInput) {
            const wrapper = document.createElement('div');
            wrapper.className = 'password-wrapper';
            passwordInput.parentNode.insertBefore(wrapper, passwordInput);
            wrapper.appendChild(passwordInput);

            const toggleBtn = document.createElement('button');
            toggleBtn.type = 'button';
            toggleBtn.className = 'toggle-password';
            // Simbolul iniÈ›ial (parola este ascunsÄƒ)
            toggleBtn.innerHTML = '&#128274;'; // Codul pentru lÄƒcÄƒtel Ã®nchis ðŸ”’
            toggleBtn.style.fontSize = '18px';
            wrapper.appendChild(toggleBtn);

            toggleBtn.addEventListener('click', function() {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    this.innerHTML = '&#128275;'; // LÄƒcÄƒtel deschis ðŸ”“
                } else {
                    passwordInput.type = 'password';
                    this.innerHTML = '&#128274;'; // LÄƒcÄƒtel Ã®nchis ðŸ”’
                }
            });
        });
    </script>
</body>
</html>