<!DOCTYPE html>
{% load i18n %}
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <title>{% translate "Autentificare - Test Temperament" %}</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #f4f7f6; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
        }
        .card { 
            background: white; 
            padding: 40px; 
            border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); 
            width: 380px; 
            position: relative;
        }
        /* Stil pentru butoanele de limbÄƒ */
        .lang-switcher {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
        }
        .lang-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        .lang-btn:hover, .lang-btn.active {
            opacity: 1;
        }
        .lang-btn img {
            width: 24px;
            height: auto;
            border-radius: 2px;
        }

        h2 { 
            text-align: center; 
            color: #2c3e50; 
            margin-bottom: 25px; 
        }
        .welcome-text {
            text-align: center;
            margin-bottom: 20px;
        }
        .error-msg { 
            color: #e74c3c; 
            background: #fdeaea; 
            padding: 10px; 
            border-radius: 4px; 
            font-size: 14px; 
            text-align: center; 
            margin-bottom: 20px; 
        }
        form p { 
            margin-bottom: 20px; 
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #444;
        }
        input { 
            width: 100%; 
            padding: 12px; 
            box-sizing: border-box; 
            border: 1px solid #ddd; 
            border-radius: 6px; 
            font-size: 16px;
        }
        button.submit-btn { 
            width: 100%; 
            padding: 12px; 
            background: #27ae60; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 18px; 
            font-weight: bold;
            margin-top: 10px; 
            transition: background 0.3s;
        }
        button.submit-btn:hover { 
            background: #219150; 
        }
        .footer-links { 
            text-align: center; 
            margin-top: 25px; 
            font-size: 14px; 
            color: #666;
        }
        .footer-links a {
            color: #27ae60;
            text-decoration: none;
            font-weight: bold;
        }
        /* Container pentru a poziÈ›iona butonul de vizibilitate */
        .password-wrapper {
            position: relative;
            display: block;
        }

        .toggle-password {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            background: none;
            border: none;
            font-size: 14px;
            color: #666;
            padding: 5px;
            z-index: 10;
        }        
    </style>
</head>
<body>
    <div class="card">
        <div class="lang-switcher">
            <form action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}">
                
                <button type="submit" name="language" value="ro" class="lang-btn {% if LANGUAGE_CODE == 'ro' %}active{% endif %}">
                    <img src="https://flagcdn.com/w40/ro.png" alt="RomÃ¢nÄƒ" title="RomÃ¢nÄƒ">
                </button>
                <button type="submit" name="language" value="fr" class="lang-btn {% if LANGUAGE_CODE == 'fr' %}active{% endif %}">
                    <img src="https://flagcdn.com/w40/fr.png" alt="FranÃ§ais" title="FranÃ§ais">
                </button>
            </form>
        </div>

        <h2>{% translate "Autentificare" %}</h2>
        
        <div class="welcome-text">
            <h3>{% translate "Bun venit la testul de temperament!" %}</h3>
            <p>{% translate "Te rugÄƒm sÄƒ te autentifici pentru a efectua testul È™i/sau a-È›i accesa rezultatele." %}</p>
        </div>
        
        {% if form.errors %}
            <div class="error-msg">
                {% translate "Utilizator sau parolÄƒ incorectÄƒ!" %}
            </div>
        {% endif %}

        <form method="post">
            {% csrf_token %}
            <div>
                <p>
                    <label for="id_username">{% translate "Nume utilizator" %}:</label>
                    {{ form.username }}
                </p>
                <p>
                    <label for="id_password">{% translate "ParolÄƒ" %}:</label>
                    {{ form.password }}
                </p>
            </div>
            <button type="submit" class="submit-btn">{% translate "IntrÄƒ Ã®n cont" %}</button>
        </form>

        <div class="footer-links">
            {% translate "Nu ai un cont?" %} <a href="{% url 'signup' %}">{% translate "ÃŽnregistreazÄƒ-te acum" %}</a>
        </div>
    </div>
    <script>
        document.querySelectorAll('input[type="password"]').forEach(function(passwordInput) {
            const wrapper = document.createElement('div');
            wrapper.className = 'password-wrapper';
            passwordInput.parentNode.insertBefore(wrapper, passwordInput);
            wrapper.appendChild(passwordInput);

            const toggleBtn = document.createElement('button');
            toggleBtn.type = 'button';
            toggleBtn.className = 'toggle-password';
            // Simbolul iniÈ›ial (parola este ascunsÄƒ)
            toggleBtn.innerHTML = '&#128274;'; // Codul pentru lÄƒcÄƒtel Ã®nchis ðŸ”’
            toggleBtn.style.fontSize = '18px';
            wrapper.appendChild(toggleBtn);

            toggleBtn.addEventListener('click', function() {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    this.innerHTML = '&#128275;'; // LÄƒcÄƒtel deschis ðŸ”“
                } else {
                    passwordInput.type = 'password';
                    this.innerHTML = '&#128274;'; // LÄƒcÄƒtel Ã®nchis ðŸ”’
                }
            });
        });
    </script>    
</body>
</html>